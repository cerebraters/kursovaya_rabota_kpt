{% extends "base.html" %}

{% block content %}
<h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h1>

<div class="card">
    <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
    <form action="/users/add" method="POST" class="add-form">
        <input type="text" name="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
        <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
        <select name="role" required>
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
            <option value="manager">–ú–µ–Ω–µ–¥–∂–µ—Ä</option>
            <option value="storekeeper">–ö–ª–∞–¥–æ–≤—â–∏–∫</option>
        </select>
        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
</div>

<div class="card">
    <h3>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
    <table class="data-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                <th>–†–æ–ª—å</th>
                <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>
                    {% if user.role == 'admin' %}
                        <span class="badge badge-admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                    {% elif user.role == 'manager' %}
                        <span class="badge badge-manager">–ú–µ–Ω–µ–¥–∂–µ—Ä</span>
                    {% else %}
                        <span class="badge badge-storekeeper">–ö–ª–∞–¥–æ–≤—â–∏–∫</span>
                    {% endif %}
                </td>
                <td>{{ user.created_at.strftime('%d.%m.%Y') }}</td>
                <td>
                    <a href="/users/edit/{{ user.id }}" class="btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    {% if user.id != session.user_id %}
                    <a href="/users/delete/{{ user.id }}" 
                       class="btn-delete" 
                       onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .badge {
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
    }
    
    .badge-admin {
        background-color: #dc3545;
        color: white;
    }
    
    .badge-manager {
        background-color: #ffc107;
        color: black;
    }
    
    .badge-storekeeper {
        background-color: #17a2b8;
        color: white;
    }
</style>
{% endblock %}