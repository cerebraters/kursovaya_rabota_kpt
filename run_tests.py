#!/usr/bin/env python
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤"""

import pytest
import sys
import os

def run_tests():
    """–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º"""
    
    print("=" * 60)
    print("–ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–û–ô –°–ò–°–¢–ï–ú–´")
    print("=" * 60)
    
    # –ê—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è pytest
    args = [
        'tests/',  # –ü–∞–ø–∫–∞ —Å —Ç–µ—Å—Ç–∞–º–∏
        '-v',  # –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
        '--cov=.',  # –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
        '--cov-report=term',  # –û—Ç—á–µ—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
        '--cov-report=html:coverage_report',  # HTML –æ—Ç—á–µ—Ç
        '--tb=short',  # –ö–æ—Ä–æ—Ç–∫–∏–π –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫
        '--color=yes',  # –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
    ]
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
    result = pytest.main(args)
    
    print("\n" + "=" * 60)
    if result == 0:
        print("‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!")
        print("üìä –û—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ø–∞–ø–∫–µ coverage_report/")
    else:
        print("‚ùå –ù–ï–ö–û–¢–û–†–´–ï –¢–ï–°–¢–´ –ù–ï –ü–†–û–ô–î–ï–ù–´!")
    print("=" * 60)
    
    return result

if __name__ == '__main__':
    sys.exit(run_tests())